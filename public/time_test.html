<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>时间转换测试</title>
</head>
<body>
    <h1>时间转换测试</h1>
    <div id="result"></div>

    <script>
        // 将UTC时间转换为北京时间
        function convertToBeijingTime(utcTime) {
            try {
                console.log('原始时间:', utcTime);
                
                // 如果时间已经是北京时间格式，直接返回
                if (typeof utcTime === 'string' && utcTime.includes(' ')) {
                    // 检查是否已经是完整的时间格式
                    const timeParts = utcTime.split(' ');
                    if (timeParts.length === 2) {
                        const dateParts = timeParts[0].split('-');
                        const timeParts2 = timeParts[1].split(':');
                        if (dateParts.length === 3 && timeParts2.length === 3) {
                            console.log('时间已经是正确格式:', utcTime);
                            // 假设传入的是北京时间，直接返回
                            return utcTime;
                        }
                    }
                }
                
                // 创建UTC时间的Date对象
                const utcDate = new Date(utcTime);
                console.log('UTC日期对象:', utcDate);
                
                // 转换为北京时间（UTC+8）
                const beijingTime = new Date(utcDate.getTime() + 8 * 60 * 60 * 1000);
                console.log('北京时间对象:', beijingTime);
                
                // 返回格式化的北京时间字符串
                const formattedTime = beijingTime.toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                }).replace(/\//g, '-');
                
                console.log('格式化后的时间:', formattedTime);
                return formattedTime;
            } catch (error) {
                console.error('时间转换失败:', error);
                return utcTime; // 如果转换失败，返回原始时间
            }
        }

        // 测试时间转换
        const testTimes = [
            '2025-10-25 08:00:00',
            '2025-10-25 16:15:24',
            '2025-10-25T08:00:00Z'
        ];

        let resultHTML = '<h2>测试结果:</h2><ul>';
        testTimes.forEach(time => {
            const converted = convertToBeijingTime(time);
            resultHTML += `<li>${time} -> ${converted}</li>`;
        });
        resultHTML += '</ul>';

        document.getElementById('result').innerHTML = resultHTML;
    </script>
</body>
</html>