<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript时间转换测试</title>
</head>
<body>
    <h1>JavaScript时间转换测试</h1>
    <div id="output"></div>

    <script>
        // 时间转换测试函数
        function convertToBeijingTime(utcTime) {
            try {
                console.log('输入时间:', utcTime);
                
                // 如果时间已经是 YYYY-MM-DD HH:MM:SS 格式，假设它已经是北京时间
                if (typeof utcTime === 'string' && /^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(utcTime)) {
                    console.log('时间已经是北京时间格式，直接返回:', utcTime);
                    return utcTime;
                }
                
                // 创建UTC时间的Date对象
                const utcDate = new Date(utcTime);
                console.log('UTC日期对象:', utcDate);
                
                // 转换为北京时间（UTC+8）
                const beijingTime = new Date(utcDate.getTime() + 8 * 60 * 60 * 1000);
                console.log('北京时间对象:', beijingTime);
                
                // 返回格式化的北京时间字符串
                const formattedTime = beijingTime.toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                }).replace(/\//g, '-');
                
                console.log('格式化后的时间:', formattedTime);
                return formattedTime;
            } catch (error) {
                console.error('时间转换失败:', error);
                return utcTime; // 如果转换失败，返回原始时间
            }
        }

        // 测试用例
        const testCases = [
            '2025-10-25 16:15:24',  // 已经是北京时间格式
            '2025-10-25T08:15:24Z', // UTC格式
            '2025-10-25T00:15:24.000Z' // 带毫秒的UTC格式
        ];

        let outputHTML = '<h2>测试结果:</h2><ul>';
        testCases.forEach((testCase, index) => {
            console.log(`测试用例 ${index + 1}:`);
            const result = convertToBeijingTime(testCase);
            outputHTML += `<li>${testCase} -> ${result}</li>`;
            console.log(`结果: ${result}\n`);
        });
        outputHTML += '</ul>';

        document.getElementById('output').innerHTML = outputHTML;
    </script>
</body>
</html>